import function core::write(s32, s32) s32

const input : s32 = 5

function factorial(n: s32) s32 {
  %entry:
    @cmp u1 : is_one, n, 1
    @if is_one then [
    @ret s32 : 1
    ] else [
      %recursive_case:
        @sub s32 : n_minus_one, n, 1
        @call s32 : recursive_result factorial(n_minus_one)
        @mul s32 : result, n, recursive_result
        @ret s32 : result
    ]
    @jumpif is_one, %return_one
    @jump %recursive_case

  %return_one:

}

public function main() s32 {
  %entry:
    @call s32 : fact_result factorial(input)
    @call s32 : exit_code write(fact_result, 0)
    @ret s32 : exit_code
}
